{% style %}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{% endstyle %}

<section class="sb-section sb-service-detail-rows color-{{ section.settings.color_scheme }} section-{{ section.id }}-padding">
  <div class="page-width">
    {% if section.settings.section_heading != blank %}
      <h2>{{ section.settings.section_heading }}</h2>
    {% endif %}
    {% if section.settings.section_subheading != blank %}
      <div class="sb-muted rte">{{ section.settings.section_subheading }}</div>
    {% endif %}

    <div class="sb-service-detail-rows__items">
      {% for block in section.blocks %}
        {% assign has_image = block.settings.image %}
        {% assign row_reverse = false %}
        {% if section.settings.alternate_layout %}
          {% if forloop.index0 | modulo: 2 == 1 %}
            {% assign row_reverse = true %}
          {% endif %}
        {% elsif block.settings.image_position == 'right' %}
          {% assign row_reverse = true %}
        {% endif %}

        {% assign show_primary = false %}
        {% assign show_secondary = false %}
        {% if block.settings.primary_cta_label != blank and block.settings.primary_cta_link != blank %}
          {% assign show_primary = true %}
        {% endif %}
        {% if block.settings.secondary_cta_label != blank and block.settings.secondary_cta_link != blank %}
          {% assign show_secondary = true %}
        {% endif %}

        <article
          class="sb-service-detail-rows__card{% if section.settings.card_style == 'surface' %} sb-card{% else %} sb-service-detail-rows__card--bordered{% endif %}{% if row_reverse %} sb-service-detail-rows__row--reverse{% endif %}{% unless has_image %} sb-service-detail-rows__row--no-image{% endunless %}"
          {{ block.shopify_attributes }}
        >
          {% if has_image %}
            <div class="sb-service-detail-rows__media">
              {{ block.settings.image | image_url: width: 900 | image_tag: loading: 'lazy', alt: block.settings.image.alt | default: block.settings.title | escape }}
            </div>
          {% endif %}

          <div class="sb-service-detail-rows__content">
            <div>
              {% if block.settings.title != blank %}
                <h3>{{ block.settings.title }}</h3>
              {% endif %}
              {% if block.settings.intro != blank %}
                <div class="sb-muted rte">{{ block.settings.intro }}</div>
              {% endif %}
            </div>

            {% if block.settings.duration != blank or block.settings.starting_price != blank %}
              <div class="sb-service-detail-rows__meta">
                {% if block.settings.duration != blank %}
                  <span><strong>Duration:</strong> {{ block.settings.duration }}</span>
                {% endif %}
                {% if block.settings.starting_price != blank %}
                  <span><strong>Starting at:</strong> {{ block.settings.starting_price }}</span>
                {% endif %}
              </div>
            {% endif %}

            {% assign bullets_one = block.settings.bullet_group_one | replace: '\r', '' | split: '\n' %}
            {% assign bullets_two = block.settings.bullet_group_two | replace: '\r', '' | split: '\n' %}
            {% assign has_bullets_one = false %}
            {% assign has_bullets_two = false %}

            {% for bullet in bullets_one %}
              {% if bullet | strip != blank %}
                {% assign has_bullets_one = true %}
              {% endif %}
            {% endfor %}
            {% for bullet in bullets_two %}
              {% if bullet | strip != blank %}
                {% assign has_bullets_two = true %}
              {% endif %}
            {% endfor %}

            {% if has_bullets_one or has_bullets_two %}
              <div class="sb-service-detail-rows__lists">
                {% if has_bullets_one %}
                  <div class="sb-service-detail-rows__list">
                    {% if block.settings.bullet_group_one_label != blank %}
                      <h4>{{ block.settings.bullet_group_one_label }}</h4>
                    {% endif %}
                    <ul>
                      {% for bullet in bullets_one %}
                        {% assign bullet_trim = bullet | strip %}
                        {% if bullet_trim != blank %}
                          <li>{{ bullet_trim }}</li>
                        {% endif %}
                      {% endfor %}
                    </ul>
                  </div>
                {% endif %}

                {% if has_bullets_two %}
                  <div class="sb-service-detail-rows__list">
                    {% if block.settings.bullet_group_two_label != blank %}
                      <h4>{{ block.settings.bullet_group_two_label }}</h4>
                    {% endif %}
                    <ul>
                      {% for bullet in bullets_two %}
                        {% assign bullet_trim = bullet | strip %}
                        {% if bullet_trim != blank %}
                          <li>{{ bullet_trim }}</li>
                        {% endif %}
                      {% endfor %}
                    </ul>
                  </div>
                {% endif %}
              </div>
            {% endif %}

            {% if show_primary or show_secondary %}
              <div class="sb-service-detail-rows__actions">
                {% if show_primary %}
                  <a class="button" href="{{ block.settings.primary_cta_link }}">{{ block.settings.primary_cta_label }}</a>
                {% endif %}
                {% if show_secondary %}
                  <a class="button button--secondary" href="{{ block.settings.secondary_cta_link }}">{{ block.settings.secondary_cta_label }}</a>
                {% endif %}
              </div>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "SB Service Detail Rows",
  "settings": [
    {
      "type": "text",
      "id": "section_heading",
      "label": "Heading",
      "default": "Explore our signature services"
    },
    {
      "type": "richtext",
      "id": "section_subheading",
      "label": "Subheading",
      "default": "<p>Each appointment is tailored to your goals, with thoughtful protocols and calm studio rituals.</p>"
    },
    {
      "type": "checkbox",
      "id": "alternate_layout",
      "label": "Auto alternate layout",
      "default": true
    },
    {
      "type": "select",
      "id": "card_style",
      "label": "Card style",
      "options": [
        {
          "value": "surface",
          "label": "Surface"
        },
        {
          "value": "bordered",
          "label": "Bordered"
        }
      ],
      "default": "surface"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 64
    }
  ],
  "blocks": [
    {
      "type": "service",
      "name": "Service",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Acne + pigmentation planning"
        },
        {
          "type": "richtext",
          "id": "intro",
          "label": "Intro",
          "default": "<p>Personalized analysis and a guided plan to help balance tone and texture.</p>"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "select",
          "id": "image_position",
          "label": "Image position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        },
        {
          "type": "text",
          "id": "bullet_group_one_label",
          "label": "Bullet group 1 label",
          "default": "Ideal for"
        },
        {
          "type": "textarea",
          "id": "bullet_group_one",
          "label": "Bullet group 1 bullets",
          "default": "Recurring breakouts\nUneven tone\nPost-blemish marks"
        },
        {
          "type": "text",
          "id": "bullet_group_two_label",
          "label": "Bullet group 2 label",
          "default": "What to expect"
        },
        {
          "type": "textarea",
          "id": "bullet_group_two",
          "label": "Bullet group 2 bullets",
          "default": "Skin consultation and intake\nTreatment roadmap with home-care notes\nSeasonal check-ins"
        },
        {
          "type": "text",
          "id": "duration",
          "label": "Duration",
          "default": "60 min"
        },
        {
          "type": "text",
          "id": "starting_price",
          "label": "Starting price",
          "default": "$120"
        },
        {
          "type": "text",
          "id": "primary_cta_label",
          "label": "Primary CTA label",
          "default": "Book this service"
        },
        {
          "type": "url",
          "id": "primary_cta_link",
          "label": "Primary CTA link"
        },
        {
          "type": "text",
          "id": "secondary_cta_label",
          "label": "Secondary CTA label",
          "default": "Learn more"
        },
        {
          "type": "url",
          "id": "secondary_cta_link",
          "label": "Secondary CTA link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "SB Service Detail Rows",
      "blocks": [
        {
          "type": "service",
          "settings": {
            "title": "Acne + pigmentation planning",
            "intro": "<p>Personalized analysis and a guided plan to help balance tone and texture.</p>",
            "bullet_group_one": "Recurring breakouts\nUneven tone\nPost-blemish marks",
            "bullet_group_two": "Skin consultation and intake\nTreatment roadmap with home-care notes\nSeasonal check-ins",
            "duration": "60 min",
            "starting_price": "$120"
          }
        },
        {
          "type": "service",
          "settings": {
            "title": "Microneedling",
            "intro": "<p>Collagen-supporting renewal to refine texture and glow.</p>",
            "bullet_group_one": "Fine lines\nAcne texture\nDullness",
            "bullet_group_two": "Numbing prep and tailored depth\nSoothing recovery mask\nAftercare guidance",
            "duration": "75 min",
            "starting_price": "$220"
          }
        },
        {
          "type": "service",
          "settings": {
            "title": "IPL brightening",
            "intro": "<p>Light-based facial to refresh tone and luminosity.</p>",
            "bullet_group_one": "Sun-related discoloration\nRedness and visible vessels\nOverall brightness",
            "bullet_group_two": "Gentle pulses of light\nCooling recovery\nSun protection plan",
            "duration": "60 min",
            "starting_price": "$180"
          }
        },
        {
          "type": "service",
          "settings": {
            "title": "Laser hair removal",
            "intro": "<p>Precision sessions for smooth, low-maintenance skin.</p>",
            "bullet_group_one": "Face + body zones\nIngrown-prone areas\nBusy routines",
            "bullet_group_two": "Consult + patch test\nSeries of sessions\nPre/post care guidance",
            "duration": "30-75 min",
            "starting_price": "$90"
          }
        },
        {
          "type": "service",
          "settings": {
            "title": "Facials",
            "intro": "<p>Customized facials to reset, hydrate, and restore.</p>",
            "bullet_group_one": "Sensitive skin\nSeasonal dullness\nEvent prep",
            "bullet_group_two": "Double cleanse + exfoliation\nTargeted masque + massage\nProduct prescription",
            "duration": "60 min",
            "starting_price": "$140"
          }
        },
        {
          "type": "service",
          "settings": {
            "title": "Permanent jewelry",
            "intro": "<p>Welded bracelets and anklets for effortless shine.</p>",
            "bullet_group_one": "Friendship keepsakes\nMinimalist layering\nGift upgrades",
            "bullet_group_two": "Style selection + sizing\nQuick, comfortable weld\nCare instructions",
            "duration": "20-40 min",
            "starting_price": "$65"
          }
        }
      ]
    }
  ]
}
{% endschema %}
